# 口罩预约程序说明

预约口罩爬虫, 将爬取"青岛政务网"公众号,自动预约口罩

- 注意：计算机应安装了 ```python3``` 和 ```pip```

- 公众号预约功能已关闭 ```2020.4```

## 1. 配置文件说明

```info.json``` 为 ```JSON``` 文件, 可以用任何编辑器打开 (不推荐记事本)

## 2. 使用教程

1. 安装依赖库

    - ```Windows```
    ```pip install -i https://pypi.tuna.tsinghua.edu.cn/simple requests```

    - ```Linux```
    ```pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple requests```

2. 打开 ```info.json```, 填写预约人信息、预约开始时间
   ( 若当前时间未到 填写的开始时间, 程序将自动等待, 并在填写的时间点开始预约 )

3. 运行脚本
    - 在```Windows```系统上双击 ```run.bat```, 以运行脚本
    - 在```Linux``` 系统上 ```python3 main.py```

## 3. JSON 文件说明

```JSON``` 文件不允许注释, 在此处给出说明。
所有可选的街道信息见 ```docs/street.json```

```
{ 
  // 预约类型, 1为邮政预约 9:30 开始 ;  2为顺丰预约 10:00 开始, 不用加引号
  "type": 2,
  // 程序的开始时间, 保持时间在引号内
  "startTime": "09:30",
  // 所有预约信息, 每个 {} 是一条, 彼此用 , 分隔
  "orders": [
    // 第一条信息
    {
      // ... 省略内容
    },
    // 第二条预约信息
    {
      // ... 省略内容
    } 
    // 最后一条信息后方不要有 ,
  ]
}
```

## 4. 思路

1. 多进程
  借助 ```multiprocessing``` 库, 每个爬虫**子进程**处理一条预约信息, 多个子进程并发, 可同时处理多条预约信息
  
2. 验证码识别
  验证码识别借助打码平台
